# ارسال پیامک های دریافتی به لینک کاربر (TrafficRelay)

با توجه به سختی کار با متدهای GetInboxMessage و GetInboxMessageWithNumber در بدست آوردن پیامک های دریافتی و وجود مشکلاتی از قبیل : اجرای مکرر متد توسط کاربر برای بدست آوردن آخرین پیامک دریافتی در زمان دریافت ، عدم اطمینان از تکراری نبودن پیامک دریافتی و ... ، یک راه کار مناسب برای بدست آوردن پیامک های دریافتی استفاده از TrafficRelay می باشد ، روش کار به این صورت است که ، وارد سامانه مدیریت پیام کوتاه شده و از بخش "تنظیمات وب سرویس" بر روی "مدیریت لینک ها" کلیک نماييد ، سپس در این بخش می توانید یک لینک از نوع "TrafficRelay" برای وب سایت خود وارد کنید مانند زیر:

```
http://www.YourSite.com/YourPage.aspx?ID=$$ID$$&From=$$FROM$$&To=$$TO$$&Text=$$TEXT$$&Date=$$DATE$$
```

یا

```
http://www.YourSite.com/YourPage.php?ID=$$ID$$&fnum=$$FROM$$&tnum=$$TO$$&msg=$$TEXT$$&Date=$$DATE$$
```

توجه داشته باشید که $$ID$$ ، $$FROM$$ ، $$TO$$ و $$TEXT$$ و $$DATE$$ کلمات کلیدی هستند که در هنگام ارسال پیامک به لینک کاربر به ترتیب با شناسه پیامک، شماره فرستنده پیامک ، شماره اختصاصی گیرنده (3000،2000،1000،5000 و ... )  ، متن پیامک و تاریخ دریافت پیامک پر می شوند.

## نکات مهم در مورد کار با TrafficRelay

- در بخش "تنظیمات وب سرویس" و "مدیریت شماره ها" شما می توانید لینک TrafficRelay شماره های خود را تعیین کنید.
- در لحظه که پیام دریافتی توسط سامانه دریافت می شود ، اطلاعات این پیامک به لینک کاربر فرستاده می شود.
- اگر به هر دلیلی لینک کاربر غیر فعال باشد و هیچ درخواستی را از سمت سرور پاسخ ندهد و TrafficRelay نتواند پارامترها را به لینک کاربر ارسال کند ، تا ۲ ساعت لینک کاربر تست می شود و به محض برطرف شدن مشکل لینک کاربر ، پیامک دریافتی دوباره برای لینک کاربر فرستاده می شود و این روند مادامی که پیامک به صورت کامل و صحیح به لینک کاربر ارسال گردد ادامه خواهد یافت .
- پیامک های که در ۳ روز اخیر دریافت شده اند، به لینک کاربر فرستاده می شود .
- لازم به ذکر است استفاده از این امکان اختیاری می باشد . 